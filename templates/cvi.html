<head>

 <!-- WebGazer.js library */ -->
 <!-- <script src="webgazer.js" type="text/javascript" > -->

<link rel="stylesheet" type="text/css" href="./cvi.css">
<link rel="stylesheet" type="text/css" href="./spectrum.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="./spectrum.js"></script>

<body>

<button onclick="toggle()">Hide</button> <!-- hide/show button -->
<p></p>

<div id="spoiler"> <!-- hide/show element -->

<div class="slidecontainer">
  <label>Speed</label>
  <input type="range" min="50" max="200" value="125" class="slider" id="rangeSpeed">
</div>

<div class="slidecontainer">
  <label>Size</label>
  <input type="range" min="100" max="250" value="100" class="slider" id="rangeSize"> 
</div>

<div>
<label>Background color</label>
<input type='text' id="full2"/>
</div>

</body>

<script type="text/javascript" src="./cvi.js"></script>

<p></p>
<div id="figures">

<img src="./shapes/square_red.png" name='square_red' />
<img src="./shapes/triangle_red.png" name='triangle_red' />
<img src="./shapes/circle_red.png" name='circle_red' />
<br clear="all" />
<img src="./shapes/square_yellow.png" name='square_yellow' />
<img src="./shapes/triangle_yellow.png" name='triangle_yellow' />
<img src="./shapes/circle_yellow.png" name='circle_yellow' />
<br clear="all" />
<img src="./shapes/square_green.png" name='square_green' />
<img src="./shapes/triangle_green.png" name='triangle_green' />
<img src="./shapes/circle_green.png" name='circle_green' />
<br clear="all" />
<img src="./shapes/square_blue.png" name='square_blue' />
<img src="./shapes/triangle_blue.png" name='triangle_blue' />
<img src="./shapes/circle_blue.png" name='circle_blue' />
<br clear="all" />
<img src="./shapes/square_grayscale.png" name='square_grayscale' />
<img src="./shapes/triangle_grayscale.png" name='triangle_grayscale' />
<img src="./shapes/circle_grayscale.png" name='circle_grayscale' />

</div>

</div> <!-- hide/show element -->

<div>
<img src="./shapes/blank.png" id="anim_ball" style="position: absolute;" height="100" width="100"> 
</div>

<script type="text/javascript">
document.querySelector('button').addEventListener('click', toggle)

function toggle(event) {
  if (document.getElementById('spoiler').style.display == 'none') {
    event.target.innerText = 'Hide'
    document.getElementById('spoiler').style.display = ''
  } else {
    event.target.innerText = 'Show'
    document.getElementById('spoiler').style.display = 'none'
  }
}
</script>

<button onclick="startTracking()">Start tracking</button>


<script src="webgazer.js" type="text/javascript"></script> <!-- webgazer.js -->

<script type="text/javascript">
// webgazer
webgazer.setRegression('ridge') // currently must set regression and tracker
            //.setTracker('clmtrackr')
            .setGazeListener(function(data, clock) {
                if (data == null) {
                    return;
                }
                // console.log(data); // data is an object containing an x and y key which are the x and y prediction coordinates
                // console.log(clock); // elapsed time in milliseconds since webgazer.begin() was called
            })
            .begin()
            .showPredictionPoints(true);

async function getPredictionKid() {
    let prediction = await webgazer.getCurrentPrediction();
        if (prediction) {
            let gazeX = prediction.x;
            let gazeY = prediction.y;
            console.log("GAZE X: " + gazeX + ", GAZE Y: " + gazeY);
        }
    }

// returns an object with x and y coordinates of the center of the element
function startTracking() {
  setInterval(function(){ 
    var element = $('#anim_ball');
    var centerX = element.offset().left + element.width()/2
    var centerY = element.offset().top + element.height()/2

    getPredictionKid();

    console.log("X: " + centerX + ", Y: " + centerY);
  }, 100);
};
</script>


